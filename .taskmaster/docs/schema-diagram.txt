# Database Schema Diagram - Propaganda Dashboard

## üóÑÔ∏è Entity Relationship Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     CLIENTS     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ
‚îÇ name            ‚îÇ
‚îÇ email           ‚îÇ
‚îÇ phone           ‚îÇ
‚îÇ address         ‚îÇ
‚îÇ is_active       ‚îÇ
‚îÇ created_at      ‚îÇ
‚îÇ updated_at      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 1:N
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      USERS      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ
‚îÇ client_id (FK)  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ email           ‚îÇ     ‚îÇ
‚îÇ password_hash   ‚îÇ     ‚îÇ
‚îÇ name            ‚îÇ     ‚îÇ
‚îÇ role            ‚îÇ     ‚îÇ
‚îÇ is_active       ‚îÇ     ‚îÇ
‚îÇ last_login      ‚îÇ     ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
         ‚îÇ               ‚îÇ
         ‚îÇ 1:N           ‚îÇ
         ‚îÇ               ‚îÇ
         ‚ñº               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ      CALLS      ‚îÇ     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ id (PK)         ‚îÇ     ‚îÇ
‚îÇ client_id (FK)  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îê
‚îÇ user_id (FK)    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ prospect_name   ‚îÇ         ‚îÇ
‚îÇ prospect_email  ‚îÇ         ‚îÇ
‚îÇ prospect_phone  ‚îÇ         ‚îÇ
‚îÇ call_type       ‚îÇ         ‚îÇ
‚îÇ status          ‚îÇ         ‚îÇ
‚îÇ outcome         ‚îÇ         ‚îÇ
‚îÇ loss_reason_id  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ notes           ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ call_duration   ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ scheduled_at    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ completed_at    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
         ‚îÇ               ‚îÇ   ‚îÇ
         ‚îÇ               ‚îÇ   ‚îÇ
         ‚ñº               ‚îÇ   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ  AUDIT LOGS     ‚îÇ     ‚îÇ   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ   ‚îÇ
‚îÇ id (PK)         ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ client_id (FK)  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îò
‚îÇ user_id (FK)    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ table_name      ‚îÇ
‚îÇ record_id       ‚îÇ
‚îÇ action          ‚îÇ
‚îÇ old_values      ‚îÇ
‚îÇ new_values      ‚îÇ
‚îÇ ip_address      ‚îÇ
‚îÇ user_agent      ‚îÇ
‚îÇ created_at      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LOSS REASONS   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ
‚îÇ client_id (FK)  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ name            ‚îÇ     ‚îÇ
‚îÇ description     ‚îÇ     ‚îÇ
‚îÇ is_active       ‚îÇ     ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
         ‚îÇ               ‚îÇ
         ‚îÇ 1:N           ‚îÇ
         ‚îÇ               ‚îÇ
         ‚ñº               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ      CALLS      ‚îÇ     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ id (PK)         ‚îÇ     ‚îÇ
‚îÇ client_id (FK)  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ user_id (FK)    ‚îÇ
‚îÇ prospect_name   ‚îÇ
‚îÇ prospect_email  ‚îÇ
‚îÇ prospect_phone  ‚îÇ
‚îÇ call_type       ‚îÇ
‚îÇ status          ‚îÇ
‚îÇ outcome         ‚îÇ
‚îÇ loss_reason_id  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ notes           ‚îÇ     ‚îÇ
‚îÇ call_duration   ‚îÇ     ‚îÇ
‚îÇ scheduled_at    ‚îÇ     ‚îÇ
‚îÇ completed_at    ‚îÇ     ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
         ‚îÇ               ‚îÇ
         ‚îÇ               ‚îÇ
         ‚ñº               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  AUDIT LOGS     ‚îÇ     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ id (PK)         ‚îÇ     ‚îÇ
‚îÇ client_id (FK)  ‚îÇ     ‚îÇ
‚îÇ user_id (FK)    ‚îÇ     ‚îÇ
‚îÇ table_name      ‚îÇ     ‚îÇ
‚îÇ record_id       ‚îÇ     ‚îÇ
‚îÇ action          ‚îÇ     ‚îÇ
‚îÇ old_values      ‚îÇ     ‚îÇ
‚îÇ new_values      ‚îÇ     ‚îÇ
‚îÇ ip_address      ‚îÇ     ‚îÇ
‚îÇ user_agent      ‚îÇ     ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
                        ‚îÇ
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LOSS REASONS   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ
‚îÇ client_id (FK)  ‚îÇ
‚îÇ name            ‚îÇ
‚îÇ description     ‚îÇ
‚îÇ is_active       ‚îÇ
‚îÇ created_at      ‚îÇ
‚îÇ updated_at      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîó Relationship Summary

### Primary Relationships:
1. **CLIENTS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **USERS**
   - One client has many users
   - Each user belongs to one client

2. **CLIENTS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **LOSS REASONS**
   - One client has many loss reasons
   - Each loss reason belongs to one client

3. **CLIENTS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **CALLS**
   - One client has many calls
   - Each call belongs to one client

4. **USERS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **CALLS**
   - One user has many calls
   - Each call belongs to one user

5. **LOSS REASONS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **CALLS**
   - One loss reason can be used in many calls
   - Each call can optionally reference one loss reason

6. **CLIENTS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **AUDIT LOGS**
   - One client has many audit logs
   - Each audit log belongs to one client

7. **USERS** ‚îÄ‚îÄ(1:N)‚îÄ‚îÄ> **AUDIT LOGS**
   - One user has many audit logs
   - Each audit log belongs to one user

## üè¢ Multi-Tenant Architecture

### Data Segregation:
- All tables include `client_id` for tenant isolation
- Foreign key constraints ensure data integrity
- Application-level filtering by client_id
- Row-level security through client_id filtering

### Key Features:
- **Tenant Isolation:** Complete data separation between clients
- **Role-Based Access:** Different access levels within each tenant
- **Audit Trail:** Complete tracking of all data changes
- **Scalability:** Schema supports horizontal scaling by client
